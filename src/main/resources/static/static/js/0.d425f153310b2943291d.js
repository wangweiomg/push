webpackJsonp([0,1,2],{"/i1P":function(t,e){},"015F":function(t,e){},5397:function(t,e){},"6Y0+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mtWM"),a=s.n(n),i={data:function(){return{channelname:"",channelemail:"",flag:!0}},methods:{returnlist:function(){this.$emit("listenlist",this.flag)},realaddChannel:function(){var t=this;if(""!=this.channelname)if(""!=this.channelemail){/^[0-9A-Za-z][\.-_0-9A-Za-z]*@[0-9A-Za-z]+(?:\.[0-9A-Za-z]+)+$/.test(this.channelemail)?a.a.post(this.$api.addChannel,{name:this.channelname,email:this.channelemail}).then(function(e){200==e.status&&(0==e.data.status?t.returnlist():t.errorMessage(e.data.msg))}).catch(function(e){t.errorMessage("请求失败")}):this.errorMessage("Email格式不正确")}else this.errorMessage("Email不能为空");else this.errorMessage("通道名称不能为空")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content1"},[s("div",{staticClass:"msg-add-channel"},[t._v("消息必须通过通道才能发送，不同的通道可以发送给不同的人群（通过二维码绑定）")]),t._v(" "),s("div",{staticClass:"add-channel-font"},[t._v("通道名称")]),t._v(" "),s("el-input",{staticClass:"input_ac",attrs:{placeholder:"建议填写贵司、产品或者网站的名称，将显示给收信人"},model:{value:t.channelname,callback:function(e){t.channelname=e},expression:"channelname"}}),t._v(" "),s("div",{staticClass:"add-channel-font"},[t._v("联系用Email")]),t._v(" "),s("el-input",{staticClass:"input_ac",attrs:{placeholder:"建议使用贵司域名后缀的电子邮箱，将显示给收信人"},model:{value:t.channelemail,callback:function(e){t.channelemail=e},expression:"channelemail"}}),t._v(" "),s("div",{staticClass:"add-create-channel"},[s("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.realaddChannel}},[t._v("创建通道")]),t._v(" "),s("el-button",{staticClass:"return-list",attrs:{size:"medium"},on:{click:t.returnlist}},[t._v("返回列表")])],1)],1)},staticRenderFns:[]};var c=s("VU/8")(i,l,!1,function(t){s("yT2k")},null,null);e.default=c.exports},Bi8Q:function(t,e){},VD7w:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mtWM"),a=s.n(n),i={data:function(){return{flag:!0,channellist:[],haschannel:!0,time:""}},methods:{sendmsg:function(t){this.$emit("listensend",this.flag,t)},editchannel:function(t){this.$emit("listenedit",this.flag,t)},addchannel:function(){this.$emit("listenadd",this.flag)},getChannel:function(){var t=this;a.a.post(this.$api.getChannel,{}).then(function(e){200==e.status&&0==e.data.status&&(e.data.data.length>0?t.haschannel=!0:t.haschannel=!1,t.channellist=e.data.data)}).catch(function(e){t.errorMessage("请求失败")})}},created:function(){this.getChannel()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[t.haschannel?t._e():s("div",{staticClass:"msg"},[t._v("还没有可用通道呢,"),s("span",{staticClass:"add-channel-no",on:{click:t.addchannel}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v("新增通道")])]),t._v(" "),t.haschannel?s("ul",t._l(t.channellist,function(e,n){return s("li",{key:e.id},[s("span",{staticClass:"channel",on:{click:function(s){return t.editchannel(e.id)}}},[t._v(t._s(e.id)+" "+t._s(e.name))]),t._v(" "),s("span",{staticClass:"sendmsg",on:{click:function(s){return t.sendmsg(e.id)}}},[s("i",{staticClass:"el-icon-s-promotion"}),t._v("发送消息")]),t._v(" "),s("span",{staticClass:"set",on:{click:function(s){return t.editchannel(e.id)}}},[s("i",{staticClass:"el-icon-setting"}),t._v("设置")])])}),0):t._e(),t._v(" "),s("div",{staticClass:"add-channel",on:{click:t.addchannel}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v("新增通道")])])},staticRenderFns:[]};var c=s("VU/8")(i,l,!1,function(t){s("015F")},"data-v-3c92be72",null);e.default=c.exports},sODT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("VD7w"),a=s("6Y0+"),i=s("mtWM"),l=s.n(i),c={props:["channelid"],data:function(){return{channelname:"",channelemail:"",flag:!0,cid:"",isforbidden:0,oldname:"",number:"",imgurl:"",subscribeList:""}},watch:{channelid:{handler:function(t,e){this.cid=t,this.getChannelById(t)},immediate:!0}},created:function(){},methods:{sendmsg:function(){this.$emit("listensend",this.flag,this.cid)},deleteChannel:function(){var t=this;this.$confirm("确认删除该通道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.post(t.$api.deleteChannelById,{id:t.cid}).then(function(e){200==e.status&&(0==e.data.status?(t.successMessage("删除成功"),t.returnlist()):t.errorMessage(e.data.msg))}).catch(function(e){t.errorMessage("请求失败")})}).catch(function(){})},getChannelById:function(t){var e=this;l.a.post(this.$api.getChannelById,{id:t}).then(function(t){console.log(t),200==t.status&&(0==t.data.status?(e.channelname=t.data.data.name,e.oldname=t.data.data.name,e.channelemail=t.data.data.email,e.imgurl=t.data.data.qrcodeUrl,e.subscribeList=t.data.data.subscribeList.map(function(t){return t.nickname}).join()):e.errorMessage(t.data.msg))}).catch(function(t){e.errorMessage("请求失败")})},returnlist:function(){this.$emit("listenlist",this.flag)},realeditChannel:function(){var t=this;if(""!=this.channelname)if(""!=this.channelemail){/^[0-9A-Za-z][\.-_0-9A-Za-z]*@[0-9A-Za-z]+(?:\.[0-9A-Za-z]+)+$/.test(this.channelemail)?l.a.post(this.$api.editChannel,{id:this.cid,name:this.channelname,email:this.channelemail,isforbidden:this.isforbidden,oldname:this.oldname}).then(function(e){200==e.status&&(0==e.data.status?t.successMessage("更改成功"):t.errorMessage(e.data.msg))}).catch(function(e){t.errorMessage("请求失败")}):this.errorMessage("Email格式不正确")}else this.errorMessage("Email不能为空");else this.errorMessage("通道名称不能为空")}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content2"},[s("div",{staticClass:"msg-edit-channel"},[t._v("基本信息")]),t._v(" "),s("div",{staticClass:"edit-channel-font"},[t._v("通道名称")]),t._v(" "),s("el-input",{staticClass:"input_ac",attrs:{placeholder:"建议填写贵司、产品或者网站的名称，将显示给收信人"},model:{value:t.channelname,callback:function(e){t.channelname=e},expression:"channelname"}}),t._v(" "),s("div",{staticClass:"edit-channel-font"},[t._v("联系用Email")]),t._v(" "),s("el-input",{staticClass:"input_ac",attrs:{placeholder:"建议使用贵司域名后缀的电子邮箱，将显示给收信人"},model:{value:t.channelemail,callback:function(e){t.channelemail=e},expression:"channelemail"}}),t._v(" "),s("div",{staticClass:"edit-forbidden-div"},[s("el-switch",{attrs:{"active-color":"#ff6c9d","inactive-color":"#aaa","active-value":"1","inactive-value":"0"},model:{value:t.isforbidden,callback:function(e){t.isforbidden=e},expression:"isforbidden"}}),t._v(" "),s("span",[t._v("停用")])],1),t._v(" "),s("div",{staticClass:"edit-create-channel"},[s("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.realeditChannel}},[t._v("更改设置")]),t._v(" "),s("el-button",{staticClass:"return-list",attrs:{size:"medium"},on:{click:t.returnlist}},[t._v("返回列表")]),t._v(" "),s("el-button",{staticClass:"return-list",attrs:{size:"medium"},on:{click:t.returnlist}},[t._v("重置sendkey")]),t._v(" "),s("el-button",{staticClass:"return-list",attrs:{size:"medium"},on:{click:t.deleteChannel}},[t._v("删除通道")]),t._v(" "),s("el-button",{staticClass:"return-list",attrs:{size:"medium",type:"primary"},on:{click:t.sendmsg}},[t._v("发送消息")])],1),t._v(" "),s("div",{staticClass:"msg-edit-channel"},[t._v("\n    本通道的订阅二维码\n    "),s("img",{attrs:{src:t.imgurl,alt:""}})]),t._v(" "),s("div",{staticClass:"edit-show-msg"},[t._v("\n    可以通过「订阅消息API」发送微信给所有扫描过此二维码的人(共\n    "),s("span",{model:{value:t.number,callback:function(e){t.number=e},expression:"number"}}),t._v("人)\n  ")]),t._v(" "),s("div",[t._v(t._s(t.subscribeList))])],1)},staticRenderFns:[]};var o=s("VU/8")(c,d,!1,function(t){s("Bi8Q")},null,null).exports,r={props:["channelid"],data:function(){return{cid:"",open:!1,title:"",content:"",request:'{"sendKey": "", "title":"", "content": ""}',response:"",sendKey:"",channelname:""}},watch:{channelid:{handler:function(t,e){this.cid=t,this.getChannelById(t)},immediate:!0}},methods:{opentestform:function(){this.open=!0},closefrom:function(){this.open=!1},getChannelById:function(t){var e=this;l.a.post(this.$api.getChannelById,{id:t}).then(function(t){200==t.status&&(0==t.data.status?(e.channelname=t.data.data.name,e.sendKey=t.data.data.sendKey):e.errorMessage(t.data.msg))}).catch(function(t){e.errorMessage("请求失败")})},sendMsg:function(){console.log("send msg",this.sendKey,this.title,this.content),l.a.get(this.$api.send,{sendKey:this.sendKey,title:this.title,content:this.content}).then(function(t){console.log("end send",t)})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"one-div"},[s("div",{staticClass:"title color-text"},[t._v("通道名称")]),t._v(" "),s("div",{staticClass:"text color-common"},[t._v(t._s(t.channelname))]),t._v(" "),s("div",{staticClass:"claer"})]),t._v(" "),s("div",{staticClass:"one-div"},[s("div",{staticClass:"title color-text"},[t._v("SendKey")]),t._v(" "),s("div",{staticClass:"text"},[s("span",{staticClass:"color-l"},[t._v(t._s(t.sendKey))])]),t._v(" "),s("div",{staticClass:"claer"})]),t._v(" "),s("div",{staticClass:"send-title"},[t._v("SubscribedMessage")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"one-div"},[s("div",{staticClass:"title color-text"},[t._v("测试工具")]),t._v(" "),s("div",{staticClass:"text"},[t.open?t._e():s("el-button",{staticClass:"notopen-button",attrs:{type:"danger",size:"small"},on:{click:t.opentestform}},[t._v("打开测试表单")]),t._v(" "),t.open?s("div",{staticClass:"form-div"},[s("div",{staticClass:"open-form-div"},[s("div",{staticClass:"add-channel-font"},[t._v("通道SendKey")]),t._v(" "),s("el-input",{attrs:{placeholder:"通道的SendKey，必填"},model:{value:t.sendKey,callback:function(e){t.sendKey=e},expression:"sendKey"}})],1),t._v(" "),s("div",{staticClass:"open-form-div"},[s("div",{staticClass:"add-channel-font"},[t._v("消息标题")]),t._v(" "),s("el-input",{attrs:{placeholder:"消息标题，80字以内，必填"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),s("div",{staticClass:"open-form-div"},[s("div",{staticClass:"add-channel-font"},[t._v("消息长内容")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:5,placeholder:"消息长内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),s("div",{staticClass:"open-form-div"},[s("div",{staticClass:"add-channel-font"},[t._v("请求串")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请求串"},model:{value:t.request,callback:function(e){t.request=e},expression:"request"}})],1),t._v(" "),s("div",{staticClass:"open-form-div"},[s("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.sendMsg}},[t._v("发送测试")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.closefrom}},[t._v("收起测试表单")])],1),t._v(" "),s("div",{staticClass:"open-form-div"},[s("div",{staticClass:"add-channel-font"},[t._v("测试结果")]),t._v(" "),s("el-input",{attrs:{type:"textarea",rows:5,placeholder:"测试结果"},model:{value:t.response,callback:function(e){t.response=e},expression:"response"}})],1)]):t._e()],1),t._v(" "),s("div",{staticClass:"claer"})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one-div"},[e("div",{staticClass:"title color-text"},[this._v("API地址")]),this._v(" "),e("div",{staticClass:"text"},[e("span",{staticClass:"color-l"},[this._v("https://push.honeywen.com/send")])]),this._v(" "),e("div",{staticClass:"claer"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one-div"},[e("div",{staticClass:"title color-text"},[this._v("说明")]),this._v(" "),e("div",{staticClass:"color-text text"},[this._v("订阅消息将发送给所有扫描过本通道订阅二维码的用户，只支持微信，不支持短信")]),this._v(" "),e("div",{staticClass:"claer"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one-div"},[e("div",{staticClass:"title color-text"},[this._v("sendKey*")]),this._v(" "),e("div",{staticClass:"text color-common"},[this._v("通道的SendKey，必填")]),this._v(" "),e("div",{staticClass:"claer"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one-div"},[e("div",{staticClass:"title color-text"},[this._v("title*")]),this._v(" "),e("div",{staticClass:"text color-common"},[this._v("标题，必填。不超过80个字")]),this._v(" "),e("div",{staticClass:"claer"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one-div"},[e("div",{staticClass:"title color-text"},[this._v("content")]),this._v(" "),e("div",{staticClass:"text color-common"},[this._v("长文本内容，选填。用户通过点击短信里的链接，打开浏览器阅读。支持Markdown语法，不超过64K")]),this._v(" "),e("div",{staticClass:"claer"})])}]};var v=s("VU/8")(r,h,!1,function(t){s("/i1P")},"data-v-24129406",null).exports,u={components:{"channel-list":n.default,"channel-add":a.default,"channel-edit":o,"channel-sendmsg":v},data:function(){return{comlist:!0,comadd:!1,comedit:!1,comsend:!1,cid:""}},watch:{$route:function(t,e){this.comlist?this.$children[0].getChannel():this.listchannel(!0)}},methods:{sendchannel:function(t,e){console.log(e+"====================="),this.cid=e,this.comadd=!t,this.comlist=!t,this.comedit=!t,this.comsend=t},editchannel:function(t,e){this.cid=e,this.comadd=!t,this.comlist=!t,this.comedit=t,this.comsend=!t},addchannel:function(t){this.comadd=t,this.comlist=!t,this.comedit=!t,this.comsend=!t},listchannel:function(t){this.comadd=!t,this.comlist=t,this.comedit=!t,this.comsend=!t}},created:function(){}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t.comlist?s("h2",[t._v("通道管理")]):t._e(),t._v(" "),t.comadd?s("h2",[s("span",{staticClass:"addColor",on:{click:t.listchannel}},[t._v("通道管理")]),s("i",{staticClass:"el-icon-d-arrow-right"}),t._v("新增 ")]):t._e(),t._v(" "),t.comedit?s("h2",[s("span",{staticClass:"addColor",on:{click:t.listchannel}},[t._v("通道管理")]),s("i",{staticClass:"el-icon-d-arrow-right"}),t._v("设置 ")]):t._e(),t._v(" "),t.comsend?s("h2",[s("span",{staticClass:"addColor",on:{click:t.listchannel}},[t._v("通道管理")]),s("i",{staticClass:"el-icon-d-arrow-right"}),t._v("发送消息 ")]):t._e(),t._v(" "),s("div",{staticClass:"page"},[t.comlist?s("channel-list",{on:{listenadd:t.addchannel,listenedit:t.editchannel,listensend:t.sendchannel}}):t._e(),t._v(" "),t.comadd?s("channel-add",{on:{listenlist:t.listchannel}}):t._e(),t._v(" "),t.comedit?s("channel-edit",{attrs:{channelid:t.cid},on:{listenlist:t.listchannel,listensend:t.sendchannel}}):t._e(),t._v(" "),t.comsend?s("channel-sendmsg",{attrs:{channelid:t.cid}}):t._e()],1)])},staticRenderFns:[]};var _=s("VU/8")(u,m,!1,function(t){s("5397")},"data-v-19bd8379",null);e.default=_.exports},yT2k:function(t,e){}});
//# sourceMappingURL=0.d425f153310b2943291d.js.map